SUBDIRS = . themes

## Process this file with automake to produce makefile.in
INCLUDES = \
	-I.						\
	-I$(top_srcdir)/gui				\
	-I$(top_srcdir)/daemon				\
	-I$(top_srcdir)/common				\
	-DAUTHDIR=\""$(authdir)"\"		 	\
	-DDATADIR=\""$(datadir)"\"		 	\
	-DGDM_DATADIR=\""$(pkgdatadir)"\"		\
	-DDMCONFDIR=\""$(dmconfdir)"\"		 	\
	-DGDM_CONFIG_FILE=\"$(gdmconfdir)/gdm.conf\"	\
	-DGDMLOCALEDIR=\""$(gdmlocaledir)"\"		\
	-DGNOMELOCALEDIR=\""$(datadir)/locale"\" 	\
	-DLIBEXECDIR=\""$(libexecdir)"\" 		\
	-DSBINDIR=\""$(sbindir)"\"		 	\
	-DPIXMAPDIR=\""$(pixmapdir)"\"		 	\
	$(GUI_CFLAGS)					\
	$(PANGO_CFLAGS)					\
	$(PANGOFT_CFLAGS)				\
	$(GREETER_CFLAGS)

#
#	-DG_DISABLE_DEPRECATED				\
#	-DGDK_DISABLE_DEPRECATED			\
#	-DGDK_PIXBUF_DISABLE_DEPRECATED			\
#	-DGTK_DISABLE_DEPRECATED			\
#	-DGNOME_DISABLE_DEPRECATED			\
#

libexec_PROGRAMS = \
	gdmgreeter

bin_SCRIPTS = \
	gdmthemetester

CLEANFILES = gdmthemetester

gdmthemetester: $(srcdir)/gdmthemetester.in
	sed -e 's,[@]libexecdir[@],$(libexecdir),g' \
		<$(srcdir)/gdmthemetester.in >gdmthemetester

gdmgreeter_SOURCES =  \
	greeter.c \
	greeter.h \
	greeter_canvas_text.c \
	greeter_canvas_text.h \
	greeter_canvas_item.c \
	greeter_canvas_item.h \
	greeter_configuration.h \
	greeter_events.c \
	greeter_events.h \
	greeter_geometry.c \
	greeter_geometry.h \
	greeter_item.c \
	greeter_item_timed.c \
	greeter_item_timed.h \
	greeter_item_capslock.c \
	greeter_item_capslock.h \
	greeter_item_clock.c \
	greeter_item_clock.h \
	greeter_item.h \
	greeter_item_pam.c \
	greeter_item_pam.h \
	greeter_item_ulist.c \
	greeter_item_ulist.h \
	greeter_item_customlist.c \
	greeter_item_customlist.h \
	greeter_parser.c \
	greeter_parser.h \
	greeter_session.c \
	greeter_session.h \
	greeter_system.c \
	greeter_system.h

gdmgreeter_LDADD = \
	$(EXTRA_GREETER_LIBS)   \
	-L$(top_builddir)/gui	\
	-lgdmwm			\
	-lgdmcommon		\
	-lgdmgreeter		\
	$(top_builddir)/common/libgdmcommon.a \
	$(GLIB_LIBS)		\
	$(GOBJECT_LIBS)		\
	$(PANGO_LIBS)		\
	$(PANGOFT_LIBS)		\
	$(GDK_LIBS)		\
	$(GDKPIXBUF_LIBS)	\
	$(GREETER_LIBS)		\
	$(X_EXTRA_LIBS)		\
	$(XINERAMA_LIBS)	\
	$(X_LIBS)		\
	-lX11			\
	-lfontconfig

EXTRA_DIST = \
	gdmthemetester.in \
	greeter.dtd
