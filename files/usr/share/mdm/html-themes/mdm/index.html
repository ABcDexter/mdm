<!DOCTYPE html>
<html>
<head>	
	<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">	
	<link href="theme.css" rel="stylesheet" media="screen">			
	
	<script>	
	
		var users = Array();
	
		// Called by MDM to disable user input
		function mdm_disable() {
			document.getElementById("entry").value = "disabled";
			document.getElementById("entry").disabled = "disabled";
			document.getElementById("ok_button").disabled = "disabled";
		}
		
		// Called by MDM to enable user input
		function mdm_enable() {
			document.getElementById("entry").value = "false";
			document.getElementById("entry").disabled = false;
			document.getElementById("ok_button").disabled = false;
		}
		
		// Called by MDM to set the welcome message
		function set_welcome_message(message) {			
			document.getElementById("welcome_message").innerHTML = message;
		}
		
		// Called by MDM to update the clock
		function set_clock(message) {			
			document.getElementById("clock").innerHTML = message;
		}
		
		// Called by MDM to allow the user to input a username		
		function mdm_prompt(message) {	
			mdm_enable();		
			document.getElementById("label").innerHTML = message;
			document.getElementById("entry").value = "";
			document.getElementById("entry").type = "text";
			document.getElementById("entry").focus();
		}
		
		// Called by MDM to allow the user to input a password
		function mdm_noecho(message) {	
			mdm_enable();		
			document.getElementById("label").innerHTML = message;
			document.getElementById("entry").value = "";
			document.getElementById("entry").type = "password";
			document.getElementById("entry").focus();
		}
		
		// Called by MDM to show a message (usually "Please enter your username")
		function mdm_msg(message) {			
			document.getElementById("message").innerHTML = message;			
		}
		
		// Called by MDM to show an error		
		function mdm_error(message) {						
			if (message != "") {
				document.getElementById("error").style.display = 'block';
			}
			else {
				document.getElementById("error").style.display = 'none';
			}
			document.getElementById("error").innerHTML = message;
		}		
		
		// Send user input to MDM
		function send_login() {
			alert("LOGIN###" + document.getElementById("entry").value);
			mdm_disable(); // disabling a field makes its value inaccessible, so disable after sending the value (not before)
			return false;
		}
		
		function init() {
			document.getElementById("error").style.display = 'none';
		}
		
		// Called by MDM to add a user to the list of users
		function mdm_add_user(username, gecos) {
								
			var box = document.createElement('div');
				box.setAttribute('class', "user-info");
				
			var link = document.createElement('a');	
				link.setAttribute('href', "javascript:alert('USER###"+username+"')");
				
			var picture = document.createElement('img');
				picture.setAttribute('class', "user-picture");
				picture.setAttribute('src', "file:///home/"+username+"/.face");
				picture.setAttribute('onerror', "this.src='file:///usr/share/pixmaps/nobody.png';");
				
			var realname_div = document.createElement('div');
				realname_div.setAttribute('class', "usergecos");
				realname_div.innerHTML = gecos;
				
			var username_div = document.createElement('div');
				username_div.setAttribute('class', "username");
				username_div.innerHTML = username;
																																
			box.appendChild(link);
			link.appendChild(picture);														
			link.appendChild(realname_div);			
			link.appendChild(username_div);			
				
			var src = document.getElementById("users");
			src.appendChild(box);
		}			
	
	</script>
	
</head>
<body>
	
	<a href="#" onClick="alert('LANGUAGE###');">Select Language...</a>
	<a href="#" onClick="alert('SHUTDOWN###');">Shutdown...</a>
	<a href="#" onClick="alert('SUSPEND###');">Suspend...</a>	
	<a href="#" onClick="alert('RESTART###');">Restart...</a>	
	<a href="#" onClick="alert('QUIT###');">Quit...</a>
	
	
	
	<div class="box">
		<div id="welcome_message"></div> <div id="clock"></div>
									
		<div id="error" class="alert alert-error"></div>
		
		<form class="form-inline" onSubmit="return send_login();">
			<fieldset>			
				<label id="label"></label>
				<input type="text" class="input-medium" id="entry">
				<button type="submit" class="btn btn-inverse" id="ok_button">$ok_label</button>
			</fieldset>
		</form>

		<div id="message"></div>
	
	</div>	
	
	
	
	<div id="users"></div>
		
		
	
	
</body>
</html>

<script src="js/bootstrap.min.js"></script>

<script>
	init();
</script>
